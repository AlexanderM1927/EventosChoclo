(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"013f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"row lg_body q-pt-xl justify-center"},[s("div",{staticClass:"col-md-4 col-sm-9 col-xs-11"},[s("div",{staticClass:"lg_go_back q-mb-md",on:{click:function(t){return e.goTo("/")}}},[s("i",{staticClass:"fas fa-arrow-left"}),e._v("\n        Volver al "),s("b",[e._v(" inicio ")])]),s("q-tabs",{staticClass:"lg_tab",attrs:{"indicator-color":"transparent"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab",{staticClass:"tablinks tab_left",class:{selected:"sign_in"==e.tab},attrs:{name:"sign_in"}},[e._v("\n          Sign in")]),s("q-tab",{staticClass:"tablinks tab_right",class:{selected:"sign_up"==e.tab},attrs:{name:"sign_up"}},[e._v("\n          Sign Up")])],1),s("q-tab-panels",{staticClass:"tab_container",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab-panel",{attrs:{name:"sign_in"}},[s("q-form",{staticClass:"col-md-4 col-xs-12 justify-center",attrs:{action:"submit"},on:{submit:function(t){return e.login()}}},[s("q-input",{staticClass:"lg_input q-mt-md",attrs:{borderless:"",label:"Email",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:"mail"}})]},proxy:!0}]),model:{value:e.user.user_email,callback:function(t){e.$set(e.user,"user_email",t)},expression:"user.user_email"}}),s("br"),s("q-input",{staticClass:"lg_input q-my-md",attrs:{borderless:"",label:"Clave",type:e.isPwd?"password":"text",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:"vpn_key"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.user.user_password,callback:function(t){e.$set(e.user,"user_password",t)},expression:"user.user_password"}}),s("div",{staticClass:"row justify-end"},[s("q-btn",{staticClass:"lg_btn",attrs:{flat:"",to:"/recovery"}},[e._v("¿Olvidaste tu contraseña?")])],1),s("q-btn",{staticClass:"lg_btn q-mt-sm full-width",attrs:{type:"submit",label:"Iniciar sesión",color:"grey"}})],1),s("q-btn",{staticClass:"lg_btn q-mt-sm full-width",attrs:{type:"submit",icon:"facebook",label:"Iniciar con facebook",color:"primary"},on:{click:e.loginWithFacebook}})],1),s("q-tab-panel",{staticClass:"tab_container",attrs:{name:"sign_up"}},[s("q-form",{staticClass:"col-md-4 col-xs-12",attrs:{action:"submit"},on:{submit:function(t){return e.register()}}},[s("q-input",{staticClass:"lg_input q-mt-md",attrs:{borderless:"",label:"Nombre",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:"badge"}})]},proxy:!0}]),model:{value:e.user.user_name,callback:function(t){e.$set(e.user,"user_name",t)},expression:"user.user_name"}}),s("br"),s("q-input",{staticClass:"lg_input q-mt-sm",attrs:{borderless:"",label:"CC",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:"fingerprint"}})]},proxy:!0}]),model:{value:e.user.user_id,callback:function(t){e.$set(e.user,"user_id",t)},expression:"user.user_id"}}),s("br"),s("q-input",{staticClass:"lg_input q-mt-sm",attrs:{borderless:"",type:"mail",label:"Email",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:"email"}})]},proxy:!0}]),model:{value:e.user.user_email,callback:function(t){e.$set(e.user,"user_email",t)},expression:"user.user_email"}}),s("br"),s("q-input",{staticClass:"lg_input q-mt-sm",attrs:{borderless:"",label:"Clave",type:e.isPwd1?"password":"text",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:"vpn_key"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:e.isPwd1?"visibility_off":"visibility"},on:{click:function(t){e.isPwd1=!e.isPwd1}}})]},proxy:!0}]),model:{value:e.user.user_password,callback:function(t){e.$set(e.user,"user_password",t)},expression:"user.user_password"}}),s("br"),s("q-input",{staticClass:"lg_input q-mt-sm q-mb-lg",attrs:{borderless:"",label:"Confirmar clave",type:e.isPwd2?"password":"text",required:"",rules:[function(e){return!!e||"Este campo es necesario"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:"vpn_key"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{attrs:{color:"grey",name:e.isPwd2?"visibility_off":"visibility"},on:{click:function(t){e.isPwd2=!e.isPwd2}}})]},proxy:!0}]),model:{value:e.user.user_passwordConfirm,callback:function(t){e.$set(e.user,"user_passwordConfirm",t)},expression:"user.user_passwordConfirm"}}),s("q-btn",{staticClass:"lg_btn full-width q-mt-sm",attrs:{type:"submit",label:"Registrarse",color:"grey"}})],1)],1)],1)],1)])])},r=[],n=(s("e6cf"),s("758b")),i={login(e){return Object(n["a"])().post("login",e)},recovery(e){return Object(n["a"])().post("recovery",e)},changePassword(e){return Object(n["a"])().post("changepassword",e)},register(e){return Object(n["a"])().post("register",e,{headers:{Authorization:e.token}})},getUser(e){return Object(n["a"])().get("user/"+e.id,{headers:{Authorization:e.token}})},modifyUser(e){return Object(n["a"])().post("user/"+e.id,e,{headers:{Authorization:e.token}})},deleteUser(e){return Object(n["a"])().delete("user/"+e.id,{headers:{Authorization:e.token}})}},o=s("9f21"),l={name:"PageIndex",mixins:[o["a"]],data(){return{tab:"sign_in",user:{user_name:"",user_id:"",user_email:"",user_password:"",user_passwordConfirm:""},isPwd:!0,isPwd1:!0,isPwd2:!0}},methods:{async loginWithFacebook(){console.log("login-facebook")},async login(){try{const e={user_email:this.user.user_email,user_password:this.user.user_password},t=await i.login(e);t.status>=200&t.status<300&&(localStorage.setItem("token",t.data.data.token),localStorage.setItem("user",JSON.stringify(t.data.data.user)),this.goTo("/"))}catch(e){this.alert("negative",e.response.data.error)}},async register(){try{if(this.activateLoading(),this.user.user_password===this.user.user_passwordConfirm){const e=await i.register(this.user);200===e.status&&(this.alert("positive","Usuario creado correctamente"),this.tab="sign_in")}else console.log(this.user),this.alert("negative","Las claves no coinciden")}catch(e){this.alert("negative",e.response.data.error)}this.disableLoading()}}},c=l,u=(s("53b2"),s("2877")),d=s("9989"),p=s("429b"),m=s("7460"),b=s("adad"),g=s("823b"),y=s("0378"),f=s("27f9"),_=s("0016"),h=s("9c40"),v=s("eebe"),w=s.n(v),q=Object(u["a"])(c,a,r,!1,null,"6342273f",null);t["default"]=q.exports;w()(q,"components",{QPage:d["a"],QTabs:p["a"],QTab:m["a"],QTabPanels:b["a"],QTabPanel:g["a"],QForm:y["a"],QInput:f["a"],QIcon:_["a"],QBtn:h["a"]})},"0db5":function(e,t,s){},"53b2":function(e,t,s){"use strict";s("0db5")},"9f21":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s("e6cf"),s("5319");var a=s("cf57"),r=s("4515");const n={data(){},methods:{validateForm(e,t){let s=!0;for(let a=0;a<e.length;a++)void 0!==e[a]&&null!==e[a]&&""!==e[a]||(s=!1);return s?t():this.alert("warning","Faltan campos por rellenar"),s},goTo(e){this.$router.push(e).catch((e=>{e._name}))},goLocation(e){location.href=e},alert(e,t){this.$q.notify({position:"top",message:t,color:e})},activateLoading(e="Cargando",t=0){var s={message:e};1===t?s.spinner=a["a"]:2===t&&(s.spinner=r["a"]),this.$q.loading.show(s)},disableLoading(){this.$q.loading.hide()},async abrirReproductor(e){const t=this.$store.state.sounds.song;t?this.$q.dialog({title:"Cambiar de canción",message:"Actualmente tienes una canción, deseas cambiarla?",cancel:!0,persistent:!0,result:e,dark:!0}).onOk((async()=>{this.activateLoading(),"video"===e.type?await this.$store.dispatch("sounds/getSongByUrl",{url:e.id,type:e.type}):"sound"===e.type&&await this.$store.dispatch("sounds/getSongByUrl",{url:e.sound_id,type:e.type}),document.getElementById("player")&&document.getElementById("player").classList.contains("inactive")&&document.getElementById("player").classList.toggle("inactive"),this.disableLoading()})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{})):(this.activateLoading(),"video"===e.type?await this.$store.dispatch("sounds/getSongByUrl",{url:e.id,type:e.type}):"sound"===e.type&&await this.$store.dispatch("sounds/getSongByUrl",{url:e.sound_id,type:e.type}),document.getElementById("player")&&document.getElementById("player").classList.contains("inactive")&&document.getElementById("player").classList.toggle("inactive"),this.disableLoading())},cerrarReproductor(){document.getElementById("player")&&!document.getElementById("player").classList.contains("inactive")&&document.getElementById("player").classList.toggle("inactive")},getSrcFromBackend(e){return"http://eventoschocloback.soft-corp.online:3001/v1/".replace("v1/","")+e.replace("public","")}}}}}]);